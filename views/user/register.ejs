<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="./css/register.css" />
  <meta
    name="google-signin-client_id"
    content="198561696099-flasriqkqqlkn2db9ttq6ellso1g6kdn.apps.googleusercontent.com"
  />
  <script src="https://apis.google.com/js/platform.js" async defer></script>

  <title>Register</title>
</head>
<navbar>
  <div class="nav">
    <a href="/">
      <img src="img/loom.png" class="loomLogo" />
    </a>
    <div class="iconNavi">
      <!-- <i class="fas fa-search"></i>
      <i class="far fa-bell"></i> -->
      <button class="btn"><a href="/login">Sign In</a></button>
    </div>
  </div>
</navbar>

  <section style="margin:0;">
    <div class="heading">
      <h1>Sign up to Loom</h1>
    </div>
  

    <form method="post" action="/register">
    
        <div
          style="
            height: 42px;
            width: 300px;
            border-radius: 2px;
            margin-top: 7rem;
          "
          class="g-signin2"
          data-onsuccess="onSignIn"
        ></div>
      <!-- <div class="g-signin2" data-onsuccess="onSignIn">
        <button class="signUpGoogle">
          <img src="img/googleIcon.png" alt="Google icon by Icons8" />
          Sign up with Google
        </button>
      </div> -->
      <!-- <div id="my-signin2"></div> -->
<!-- 
      <a href="#">
        <button class="signUpSlack">
          <img src="img/slackIcon.png" alt="Slack New icon by Icons8" />
          Sign up with Slack
        </button>
      </a> -->
      <div class="option">or</div>

      <% if(passErr){ %>
        <div class="alert alert-danger text-center" role="alert">
        <p> password should contain at least one lowercase character,
          at least one uppercase character,
          at least one numeric value,
          at least one special character,
          any character except line break.</p>
           

        </div>
     <% }%>
      <div class="form">
        <% if(loginErr){ %>
          <div class="alert alert-danger text-center" role="alert">
            User already exist
          </div>
       <% }%>
       <% if(notVerified){ %>
        <div class="alert alert-danger text-center" role="alert">
          Email Not
        </div>
     <% }%>
        <label for="email">Username: </label>
        <input
          type="text"
          name="username"
          id=""
          placeholder="Enter your username..."
        />
        <label for="email">Email address: </label>
        <input
          type="text"
          name="email"
          id=""
          placeholder="Enter your Email..."
        />
        <label for="password">Password: </label>
        <input
          type="password"
          name="password"
          id=""
          placeholder="Enter your Password..."
        />
      
        <button type="submit" class="signUpBtn">Sign Up</button>
      </div>
    </form>
  </section>
  <script>
    function signOut() {
      var auth2 = gapi.auth2.getAuthInstance();
      auth2.signOut().then(function () {
        console.log("User signed out.");
      });
    }
  </script>

  <script>
    function onSignIn(googleUser) {
      var profile = googleUser.getBasicProfile();
      console.log("ID: " + profile.getId()); // Do not send to your backend! Use an ID token instead.
      console.log("Name: " + profile.getName());
      console.log("Image URL: " + profile.getImageUrl());
      console.log("Email: " + profile.getEmail()); // This is null if the 'email' scope is not present.
      var id_token = googleUser.getAuthResponse().id_token;
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/googleLogin");
      xhr.setRequestHeader("Content-Type", "application/json");
      xhr.onload = function () {
        console.log(id_token);
        console.log("Signed in as: " + xhr.responseText);
        if (xhr.responseText == "success") {
          signOut();
          location.assign("/home");
        }
      };
      xhr.send(JSON.stringify({ token: id_token }));
    }
  </script>
  <!-- <script>
    function onSuccess(googleUser) {
      console.log("Logged in as: " + googleUser.getBasicProfile().getName());
    }
    function onFailure(error) {
      console.log(error);
    }
    function renderButton() {
      gapi.signin2.render("my-signin2", {
        scope: "profile email",
        // margin: "18px",
        width: 297,
        height: 55,
        // textAlign: "center",
        // borderRadius: "8px",
        // backgroundColor: "transparent",
        // border: "2 solid hsla(240, 8%, 46%, 0.2)",
        // color: "#212121",
        // fontWeight: 600,
        // fontSize: 18,
        longtitle: true,
        // theme: "dark",
        onsuccess: onSuccess,
        onfailure: onFailure,
      });
    }
  </script> -->

  <!-- <script
    src="https://apis.google.com/js/platform.js?onload=renderButton"
    async
    defer
  ></script> -->
  <!-- <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"
  ></script> -->
</body>
</html>
